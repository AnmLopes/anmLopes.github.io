document.addEventListener("DOMContentLoaded", function () {
    const arrayContainer = document.getElementById("array-container");
    const startButton = document.getElementById("start-sorting");
    
    let array = [50, 40, 30, 20, 10];

    function drawArray() {
        arrayContainer.innerHTML = "";
        array.forEach((value) => {
            const bar = document.createElement("div");
            bar.style.height = `${value * 3}px`;
            bar.classList.add("bar");
            arrayContainer.appendChild(bar);
        });
    }

    async function bubbleSort() {
        let bars = document.querySelectorAll(".bar");
        for (let i = 0; i < array.length - 1; i++) {
            for (let j = 0; j < array.length - i - 1; j++) {
                bars[j].style.backgroundColor = "red";
                bars[j + 1].style.backgroundColor = "red";
                await new Promise((resolve) => setTimeout(resolve, 300));

                if (array[j] > array[j + 1]) {
                    [array[j], array[j + 1]] = [array[j + 1], array[j]];
                    drawArray();
                    bars = document.querySelectorAll(".bar");
                }
                bars[j].style.backgroundColor = "blue";
                bars[j + 1].style.backgroundColor = "blue";
            }
        }
    }

    startButton.addEventListener("click", async () => {
        await bubbleSort();
    });

    drawArray();
});
